// Comprehensive ingredient icon mapping for Lithuanian ingredients

export interface IngredientIconMap {
  [key: string]: string;
}

// Main ingredient icon mapping
export const ingredientIcons: IngredientIconMap = {
  // Vegetables (DarÅ¾ovÄ—s)
  'bulvÄ—s': 'ğŸ¥”',
  'bulvÄ—': 'ğŸ¥”',
  'morka': 'ğŸ¥•',
  'morkos': 'ğŸ¥•',
  'svogÅ«nas': 'ğŸ§…',
  'svogÅ«nai': 'ğŸ§…',
  'Äesnakas': 'ğŸ§„',
  'pomidoras': 'ğŸ…',
  'pomidorai': 'ğŸ…',
  'agurkas': 'ğŸ¥’',
  'agurkai': 'ğŸ¥’',
  'kopÅ«stas': 'ğŸ¥¬',
  'kopÅ«stai': 'ğŸ¥¬',
  'paprika': 'ğŸŒ¶ï¸',
  'paprikos': 'ğŸŒ¶ï¸',
  'burokÄ—lis': 'ğŸŸ£',
  'burokÄ—liai': 'ğŸŸ£',
  'ridikÄ—lis': 'ğŸ”´',
  'salotÅ³ lapai': 'ğŸ¥¬',
  'salotos': 'ğŸ¥¬',
  'petraÅ¾olÄ—s': 'ğŸŒ¿',
  'krapai': 'ğŸŒ¿',
  'bazilikas': 'ğŸŒ¿',
  'rÅ«gÅ¡tynÄ—s': 'ğŸŒ¿',

  // Meat (MÄ—sa)
  'viÅ¡tiena': 'ğŸ”',
  'kiauliena': 'ğŸ·',
  'jautiena': 'ğŸ„',
  'verÅ¡iena': 'ğŸ„',
  'deÅ¡ra': 'ğŸŒ­',
  'deÅ¡ros': 'ğŸŒ­',
  'Å¡onkauliukai': 'ğŸ¥©',
  'mÄ—sa': 'ğŸ¥©',
  'kumpio': 'ğŸ¥“',
  'kumpis': 'ğŸ¥“',
  'laÅ¡iniai': 'ğŸ¥“',

  // Fish (Å½uvis)
  'Å¾uvis': 'ğŸŸ',
  'laÅ¡iÅ¡a': 'ğŸŸ',
  'silkÄ—': 'ğŸŸ',
  'menkÄ—': 'ğŸŸ',
  'lydeka': 'ğŸŸ',

  // Dairy (Pieno produktai)
  'pienas': 'ğŸ¥›',
  'grietinÄ—': 'ğŸ¥›',
  'grietinÄ—lÄ—': 'ğŸ¥›',
  'varÅ¡kÄ—': 'ğŸ§€',
  'sÅ«ris': 'ğŸ§€',
  'svietas': 'ğŸ§ˆ',
  'sviestas': 'ğŸ§ˆ',
  'jogurtas': 'ğŸ¥›',
  'kefyras': 'ğŸ¥›',

  // Eggs (KiauÅ¡iniai)
  'kiauÅ¡inis': 'ğŸ¥š',
  'kiauÅ¡iniai': 'ğŸ¥š',
  'kiauÅ¡inio': 'ğŸ¥š',

  // Grains & Cereals (GrÅ«dai)
  'miltai': 'ğŸŒ¾',
  'kvietiniai miltai': 'ğŸŒ¾',
  'rugiÅ³ miltai': 'ğŸŒ¾',
  'grikiai': 'ğŸŒ¾',
  'ryÅ¾iai': 'ğŸš',
  'aviÅ¾os': 'ğŸŒ¾',
  'mieÅ¾iai': 'ğŸŒ¾',
  'kruopos': 'ğŸŒ¾',
  'duona': 'ğŸ',
  'duonos': 'ğŸ',

  // Legumes (AnkÅ¡tiniai)
  'pupelÄ—s': 'ğŸ«˜',
  'Å¾irniai': 'ğŸŸ¢',
  'lÄ™Å¡iai': 'ğŸŸ¤',
  'soja': 'ğŸ«˜',

  // Fruits (Vaisiai)
  'obuolys': 'ğŸ',
  'obuoliai': 'ğŸ',
  'kriauÅ¡Ä—': 'ğŸ',
  'kriauÅ¡Ä—s': 'ğŸ',
  'braÅ¡kÄ—s': 'ğŸ“',
  'mÄ—lynÄ—s': 'ğŸ«',
  'spanguolÄ—s': 'ğŸ”´',
  'citrina': 'ğŸ‹',
  'citrinos': 'ğŸ‹',
  'apelsinas': 'ğŸŠ',
  'apelsinai': 'ğŸŠ',
  'bananas': 'ğŸŒ',
  'bananai': 'ğŸŒ',

  // Nuts & Seeds (RieÅ¡utai ir sÄ—klos)
  'rieÅ¡utai': 'ğŸ¥œ',
  'lazdyno rieÅ¡utai': 'ğŸŒ°',
  'graikiniai rieÅ¡utai': 'ğŸ¥œ',
  'migdolai': 'ğŸ¥œ',
  'saulÄ—grÄ…Å¾Å³ sÄ—klos': 'ğŸŒ»',
  'sezamo sÄ—klos': 'ğŸŒ°',

  // Spices & Herbs (Prieskoniai)
  'druska': 'ğŸ§‚',
  'cukrus': 'ğŸ¯',
  'medus': 'ğŸ¯',
  'pipirai': 'âš«',
  'kmynai': 'ğŸŒ¿',
  'cinamonas': 'ğŸŸ¤',
  'vanilÄ—': 'ğŸŸ¤',
  'imbiero': 'ğŸ«š',
  'imbiras': 'ğŸ«š',

  // Oils & Fats (Aliejai)
  'aliejus': 'ğŸ«’',
  'saulÄ—grÄ…Å¾Å³ aliejus': 'ğŸŒ»',
  'alyvuogiÅ³ aliejus': 'ğŸ«’',
  'rapsÅ³ aliejus': 'ğŸŒ»',

  // Beverages (GÄ—rimai)
  'vanduo': 'ğŸ’§',
  'sultys': 'ğŸ§ƒ',
  'vynas': 'ğŸ·',
  'alus': 'ğŸº',
  'arbata': 'ğŸµ',
  'kava': 'â˜•',

  // Pasta & Noodles (Makaronai)
  'makaronai': 'ğŸ',
  'spageÄiai': 'ğŸ',
  'vermiÅ¡eliai': 'ğŸœ',

  // Mushrooms (Grybai)
  'grybai': 'ğŸ„',
  'baravykai': 'ğŸ„',
  'voveraitÄ—s': 'ğŸ„',

  // Berries (Uogos)
  'uogos': 'ğŸ«',
  'avieÄiÅ³': 'ğŸ“',
  'avieÄÄ—s': 'ğŸ“',
  'serbentai': 'ğŸ”´',

  // Condiments (PadaÅ¾ai)
  'majonezo': 'ğŸ¥„',
  'majonezas': 'ğŸ¥„',
  'garstyÄios': 'ğŸŸ¡',
  'keÄupas': 'ğŸ…',
  'actas': 'ğŸ¶',

  // Baking (Kepimo produktai)
  'mielÄ—s': 'ğŸŸ¤',
  'kepimo milteliai': 'ğŸŸ¤',
  'soda': 'ğŸŸ¤',
};

// Category-based fallback icons
export const categoryIcons: IngredientIconMap = {
  // Common food categories
  'mÄ—sa': 'ğŸ¥©',
  'Å¾uvis': 'ğŸŸ',
  'darÅ¾ovÄ—': 'ğŸ¥¬',
  'vaisius': 'ğŸ',
  'pieno': 'ğŸ¥›',
  'grÅ«dai': 'ğŸŒ¾',
  'prieskoniai': 'ğŸŒ¿',
  'aliejus': 'ğŸ«’',
  'rieÅ¡utai': 'ğŸ¥œ',
  'uogos': 'ğŸ«',
  'grybai': 'ğŸ„',
};

// List of common Lithuanian suffixes to remove (heuristically)
const LT_SUFFIXES = [
  'iÅ³', 'iui', 'iais', 'Ä—mis', 'Ä—se', 'Ä—ms',
  'os', 'oms', 'omis', 'ose',
  'es', 'ei', 'e', 'Ä™', 'Ä—',
  'Å³', 'ui', 'us', 'u', 'o', 'Ä…', 'a',
  'is', 'ys', 'iÅ³', 'iÅ³jÅ³', 'iam', 'iai',
];

function removeSuffix(word: string): string {
  for (const suffix of LT_SUFFIXES) {
    if (word.endsWith(suffix) && word.length > suffix.length + 2) {
      return word.slice(0, -suffix.length);
    }
  }
  return word;
}

// Function to get ingredient icon
export function getIngredientIcon(ingredientName: string): string {
  if (!ingredientName) return 'ğŸ¥„'; // Default utensil icon

  // Convert to lowercase and remove extra spaces
  const cleanName = ingredientName.toLowerCase().trim();

  // Direct match
  if (ingredientIcons[cleanName]) {
    return ingredientIcons[cleanName];
  }

  // Partial match - check if ingredient name contains any key
  for (const [key, icon] of Object.entries(ingredientIcons)) {
    if (cleanName.includes(key)) {
      return icon;
    }
  }

  // Try after suffix removal
  const root = removeSuffix(cleanName);
  for (const [key, icon] of Object.entries(ingredientIcons)) {
    if (root === key || key.includes(root) || root.includes(key)) {
      return icon;
    }
  }

  // Category-based fallback
  for (const [category, icon] of Object.entries(categoryIcons)) {
    if (cleanName.includes(category)) {
      return icon;
    }
  }

  // Smart categorization based on common patterns
  if (cleanName.includes('mÄ—sa') || cleanName.includes('kiauliena') || cleanName.includes('viÅ¡tiena')) {
    return 'ğŸ¥©';
  }

  if (cleanName.includes('Å¾uv') || cleanName.includes('laÅ¡iÅ¡') || cleanName.includes('silkÄ—')) {
    return 'ğŸŸ';
  }

  if (cleanName.includes('pien') || cleanName.includes('grietin') || cleanName.includes('sÅ«r')) {
    return 'ğŸ¥›';
  }

  if (cleanName.includes('milt') || cleanName.includes('duon') || cleanName.includes('kruop')) {
    return 'ğŸŒ¾';
  }

  if (cleanName.includes('darÅ¾ov') || cleanName.includes('salot') || cleanName.includes('kopÅ«st')) {
    return 'ğŸ¥¬';
  }

  if (cleanName.includes('vais') || cleanName.includes('obuol') || cleanName.includes('kriauÅ¡Ä—')) {
    return 'ğŸ';
  }

  // Default fallback
  return 'ğŸ¥„';
}

// Function to get ingredient icon with multilingual support
export function getMultilingualIngredientIcon(ingredient: any): string {
  if (typeof ingredient === 'string') {
    return getIngredientIcon(ingredient);
  }
  
  if (ingredient?.name) {
    // Try Lithuanian first, then English, then any string value
    const ltName = ingredient.name.lt || ingredient.name.en || ingredient.name;
    return getIngredientIcon(ltName);
  }
  
  return 'ğŸ¥„'; // Default fallback
}
